<html>

<head>
    <title>A Time Travellers Map</title>
    <style>
        .buttons {
            margin: auto;
        }
    </style>
    <script src="https://openlayers.org/en/v4.0.1/build/ol.js" type="text/javascript"></script>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>

    <script>
        $(function() {
            $('#add_more').click(function() {
                console.log('clicked')
                var formcount = $('#id_nested-TOTAL_FORMS').val();
                console.log(formcount)
                $('#form_set').append($('#empty_form').html().replace(/__prefix__/g, form_idx));
                $('#id_nested-TOTAL_FORMS').val(parseInt(formcount) + 1);
            })
        });
    </script>


<form action="" method="post">
    {% csrf_token %}
    <div id="form_set">
        {{form}} {{ map_formset.management_form }} {% for form in map_formset.forms %}
        <table class='no_error'>
            {{ form.as_table }}
        </table>
        {% endfor %}
    </div>
    <div id="empty_form" style="display:none">
        <table class='no_error'>
            {{ map_formset.empty_form.as_table }}

        </table>
    </div>

    <th></th>
    <td><input type="submit" name="submit" value="Submit" class="button" </td>
        </tr>
        </table>
</form>
<input type="button" value="Add More" id="add_more">
